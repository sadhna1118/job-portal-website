{% extends "base.html" %}

{% block title %}Apply for {{ job.title }} - Job Portal{% endblock %}

{% block content %}
<div class="container" style="margin-top: 2rem;">
    <div class="form-container">
        <div class="page-breadcrumb">
            <a href="{{ url_for('jobs') }}">Jobs</a> / 
            <a href="{{ url_for('job_detail', job_id=job.id) }}">{{ job.title }}</a> / 
            <span>Apply</span>
        </div>
        
        <div class="form-header">
            <h1>Apply for {{ job.title }}</h1>
            <p class="text-muted">{{ job.company }} â€¢ {{ job.location }}</p>
            <div style="margin-top: var(--spacing-sm);">
                <span class="job-type-badge">{{ job.job_type or 'Full-time' }}</span>
                <span class="text-muted" style="margin-left: var(--spacing-md); font-size: 0.875rem;">
                    Posted {{ job.created_at.strftime('%b %d, %Y') }}
                </span>
            </div>
        </div>

        <form method="POST" enctype="multipart/form-data">
            <!-- Cover Letter -->
            <div class="form-group">
                <label for="cover_letter" class="form-label">
                    Cover Letter <span style="color: var(--color-error);">*</span>
                </label>
                <p class="text-muted" style="font-size: 0.875rem; margin-bottom: var(--spacing-sm);">
                    Introduce yourself and explain why you'd be a great fit for this position.
                </p>
                <textarea id="cover_letter" name="cover_letter" rows="8" 
                    class="form-textarea"
                    placeholder="Tell the employer why you're a great fit for this position..." 
                    required></textarea>
            </div>

            <!-- Resume Upload -->
            <div class="form-group">
                <label class="form-label">
                    Resume <span class="text-muted">(Optional but recommended)</span>
                </label>
                <p class="text-muted" style="font-size: 0.875rem; margin-bottom: var(--spacing-sm);">
                    Accepted file types: PDF, DOC, DOCX (Max size: 5MB)
                </p>
                <div style="border: 2px dashed var(--color-border); border-radius: var(--radius-md); padding: var(--spacing-xl); text-align: center; background-color: var(--color-bg-light);">
                    <i class="icon-upload" style="font-size: 3rem; color: var(--color-text-muted); margin-bottom: var(--spacing-md);"></i>
                    <div style="margin-bottom: var(--spacing-sm);">
                        <label for="resume" style="color: var(--color-primary); cursor: pointer; font-weight: 500;">
                            <span>Upload a file</span>
                            <input id="resume" name="resume" type="file" style="display: none;" accept=".pdf,.doc,.docx">
                        </label>
                        <span class="text-muted"> or drag and drop</span>
                    </div>
                    <p id="file-name" class="text-muted" style="font-size: 0.8125rem;">No file selected</p>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <a href="{{ url_for('job_detail', job_id=job.id) }}" class="btn-secondary">Cancel</a>
                <button type="submit" class="btn-primary">
                    <i class="icon-send"></i>
                    Submit Application
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    // Show selected file name
    document.getElementById('resume').addEventListener('change', function(e) {
        const fileName = e.target.files.length ? e.target.files[0].name : 'No file selected';
        document.getElementById('file-name').textContent = fileName;
    });
</script>
{% endblock %}